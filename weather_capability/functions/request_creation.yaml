parameters:
  - name: response
    optional: false

action_groups:
  - actions:
      - type: set-variables
        scripting_type: spel
        variables:
          - name: user_reply
            value: <? response ?>

  - condition: (user_reply == "Yeah")
    actions:
      - type: message
        message:
          type: text
          content: "New request has been created for you.\n\nRequest details can be found here: [Your request for new Enhancement](http://www.a.com)."
          markdown: true
          delay : 2
          
  - condition: (user_reply == "Nah")
    actions:
      - type: message
        message:
          type: text
          content: "How dare you to say NO!"

# payload response in case of successfully identifying "Yup" scenario
# {
#   "id": "1729095013398.01",
#   "attachment": {
#     "type": "text",
#     "content": "New request has been created for you.\n\nRequest details can be found here: [Your request for new Enhancement](http://www.a.com).",
#     "markdown": true,
#     "delay": 2
#   },
#   "receivedAt": "2024-10-16T16:10:13.394Z",
#   "participant": {
#     "isBot": true,
#     "senderId": "naa_capability"
#   },
#   "logs": [
#     {
#       "level": "info",
#       "code": "RAGE_SEARCHFILTER",
#       "message": "Preselection triggered with filters",
#       "context": {},
#       "data": [
#         {
#           "id": "customer_documents_search",
#           "searchConfiguration": {
#             "maxChunkCount": 5,
#             "maxDocumentCount": null
#           },
#           "dataRepositories": [
#             "*"
#           ],
#           "dataRepositoryType": "vector",
#           "dataRepositoryMetadata": [
#             {
#               "key": "type",
#               "value": [
#                 "custom",
#                 "MSSharePoint"
#               ]
#             }
#           ],
#           "documentMetadata": [],
#           "chunkMetadata": []
#         },
#         {
#           "id": "scenarios_search",
#           "searchConfiguration": {
#             "maxChunkCount": null,
#             "maxDocumentCount": 10
#           },
#           "dataRepositories": [
#             "f8197523-f19a-43ac-ae64-933f568d049e"
#           ],
#           "dataRepositoryType": "vector",
#           "documentMetadata": [
#             {
#               "key": "visibility_objects-ibn_targets",
#               "selectMode": [
#                 "ignoreIfKeyAbsent"
#               ],
#               "value": []
#             }
#           ],
#           "chunkMetadata": []
#         }
#       ],
#       "timestamp": 1729095011605
#     },
#     {
#       "level": "info",
#       "code": "RESULTS_FOUND",
#       "message": "Preselection identified relevant information: 4 scenario(s), 0 customer document(s), 0 SAP document(s)",
#       "context": {},
#       "data": [
#         {
#           "capability_name": "praxworld",
#           "scenario_name": "request_creation"
#         },
#         {
#           "capability_name": "praxworld",
#           "scenario_name": "summary_verify"
#         },
#         {
#           "capability_name": "praxworld",
#           "scenario_name": "greetings"
#         },
#         {
#           "capability_name": "praxworld",
#           "scenario_name": "weather"
#         }
#       ],
#       "timestamp": 1729095012131
#     },
#     {
#       "level": "info",
#       "code": "RESULTS_FOUND",
#       "message": "Preselection identified relevant information with details ",
#       "context": {},
#       "data": {
#         "results": [
#           {
#             "filterId": "customer_documents_search",
#             "results": [],
#             "error": null
#           },
#           {
#             "filterId": "scenarios_search",
#             "results": [
#               {
#                 "dataRepository": {
#                   "id": "f8197523-f19a-43ac-ae64-933f568d049e",
#                   "title": "scenarios",
#                   "metadata": [
#                     {
#                       "key": "digital_assistant",
#                       "value": [
#                         "naa_capability"
#                       ]
#                     },
#                     {
#                       "key": "version",
#                       "value": [
#                         "38bb4c9c-72da-4f59-8293-c069b46a5e1f"
#                       ]
#                     },
#                     {
#                       "key": "tenant_id",
#                       "value": [
#                         "8cf9736b-7795-4b58-ad00-66d71d77c0ec"
#                       ]
#                     },
#                     {
#                       "key": "type",
#                       "value": [
#                         "predefined"
#                       ]
#                     }
#                   ],
#                   "documents": [
#                     {
#                       "id": "984fb2cf-3e90-421c-9fe5-9efe958c48e6",
#                       "metadata": [
#                         {
#                           "key": "scenario_name",
#                           "value": [
#                             "request_creation"
#                           ]
#                         },
#                         {
#                           "key": "capability_name",
#                           "value": [
#                             "praxworld"
#                           ]
#                         },
#                         {
#                           "key": "capability_namespace",
#                           "value": [
#                             "sap.test"
#                           ]
#                         }
#                       ],
#                       "chunks": [
#                         {
#                           "id": "5948bfa9-9dc3-4591-b43f-4fb453dc419c",
#                           "content": "This scenario is used to get the user's response when they are asked to create a request. \nThe user will say \"Yeah\" or \"Yes\" if they want to create a ",
#                           "metadata": [
#                             {
#                               "key": "sap.document-grounding/language",
#                               "value": [
#                                 "en"
#                               ]
#                             }
#                           ]
#                         }
#                       ]
#                     },
#                     {
#                       "id": "0f077c8d-32c6-4c6b-bc48-160f727e704e",
#                       "metadata": [
#                         {
#                           "key": "scenario_name",
#                           "value": [
#                             "summary_verify"
#                           ]
#                         },
#                         {
#                           "key": "capability_name",
#                           "value": [
#                             "praxworld"
#                           ]
#                         },
#                         {
#                           "key": "capability_namespace",
#                           "value": [
#                             "sap.test"
#                           ]
#                         }
#                       ],
#                       "chunks": [
#                         {
#                           "id": "0b871d86-5e39-49bc-99d1-a4a4542c6bed",
#                           "content": "This scenario is used to get the user's response when they are asked to confirm if the summary is correct. \nThe user will say \"Yup\" or \"Yes\" if the su",
#                           "metadata": [
#                             {
#                               "key": "sap.document-grounding/language",
#                               "value": [
#                                 "en"
#                               ]
#                             }
#                           ]
#                         }
#                       ]
#                     },
#                     {
#                       "id": "5bd90065-4201-402c-8fa7-8cbf57fc5b59",
#                       "metadata": [
#                         {
#                           "key": "scenario_name",
#                           "value": [
#                             "greetings"
#                           ]
#                         },
#                         {
#                           "key": "capability_name",
#                           "value": [
#                             "praxworld"
#                           ]
#                         },
#                         {
#                           "key": "capability_namespace",
#                           "value": [
#                             "sap.test"
#                           ]
#                         }
#                       ],
#                       "chunks": [
#                         {
#                           "id": "7c2c7a57-b48a-4c26-9f13-4605c35e0313",
#                           "content": "This scenario is used to get the greeting(Good morning, Hi, Hello, Namaskara) from the user. The user can also ask any questions and can also just use",
#                           "metadata": [
#                             {
#                               "key": "sap.document-grounding/language",
#                               "value": [
#                                 "en"
#                               ]
#                             }
#                           ]
#                         }
#                       ]
#                     },
#                     {
#                       "id": "c5a04ba9-0f8b-40dc-8f1c-72ab30dceb7b",
#                       "metadata": [
#                         {
#                           "key": "scenario_name",
#                           "value": [
#                             "weather"
#                           ]
#                         },
#                         {
#                           "key": "capability_name",
#                           "value": [
#                             "praxworld"
#                           ]
#                         },
#                         {
#                           "key": "capability_namespace",
#                           "value": [
#                             "sap.test"
#                           ]
#                         }
#                       ],
#                       "chunks": [
#                         {
#                           "id": "d73e4f4e-2429-4fb4-a960-635aae9d485e",
#                           "content": "This scenario is used to get the details regarding the country, industry and scope from the user.\nThe user will input the details regarding the countr",
#                           "metadata": [
#                             {
#                               "key": "sap.document-grounding/language",
#                               "value": [
#                                 "en"
#                               ]
#                             }
#                           ]
#                         }
#                       ]
#                     }
#                   ]
#                 }
#               }
#             ],
#             "error": null
#           }
#         ]
#       },
#       "timestamp": 1729095012131
#     },
#     {
#       "level": "info",
#       "code": "SCENARIO_SELECTED",
#       "message": "The LLM selected a scenario to execute",
#       "context": {
#         "capability": {
#           "name": "praxworld",
#           "namespace": "sap.test"
#         },
#         "scenario_name": "request_creation"
#       },
#       "data": {},
#       "timestamp": 1729095012541
#     },
#     {
#       "level": "info",
#       "code": "SCENARIO_EXECUTED_WITH_PARAMETERS",
#       "message": "The scenario request_creation is called with parameters",
#       "context": {
#         "capability": {
#           "name": "praxworld",
#           "namespace": "sap.test"
#         },
#         "scenario_name": "request_creation"
#       },
#       "data": {
#         "response": "Yeah"
#       },
#       "timestamp": 1729095013093
#     },
#     {
#       "level": "info",
#       "code": "DIALOG_FUNCTION_STARTED",
#       "message": "Dialog function request_creation started",
#       "context": {
#         "capability": {
#           "name": "praxworld",
#           "namespace": "sap.test"
#         },
#         "scenario_name": "request_creation",
#         "dialog_function_name": "request_creation"
#       },
#       "data": {
#         "parameters": {
#           "$initial_context": {},
#           "$transient": {
#             "app_context": {},
#             "client": {
#               "timezone": "Asia/Kolkata",
#               "device_type": "desktop",
#               "client_type": "webclient",
#               "platform": "browser"
#             },
#             "submitted_data": {},
#             "user": {
#               "last_name": "Prakash",
#               "uuid": "38d9bd21-9e72-4167-bfa9-bd49c9b8866d",
#               "first_name": "Satya",
#               "email": "sai.satya.vara.prakash.rapeti@sap.com"
#             }
#           },
#           "response": "Yeah"
#         }
#       },
#       "timestamp": 1729095013153
#     },
#     {
#       "level": "info",
#       "code": "DIALOG_FUNCTION_FINISHED",
#       "message": "Dialog function request_creation finished",
#       "context": {
#         "capability": {
#           "name": "praxworld",
#           "namespace": "sap.test"
#         },
#         "scenario_name": "request_creation",
#         "dialog_function_name": "request_creation"
#       },
#       "data": {
#         "results": {}
#       },
#       "timestamp": 1729095013158
#     }
#   ],
#   "debug": {
#     "correlationId": "37785d0c-f134-4d1a-9f9f-7450f2caa30f"
#   }
# }

